<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_31) on Sat Apr 07 12:47:24 EEST 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
RetryLatch (The Multiverse Code (so API and implementation) 0.7.0 API)
</TITLE>

<META NAME="date" CONTENT="2012-04-07">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RetryLatch (The Multiverse Code (so API and implementation) 0.7.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RetryLatch.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/multiverse/api/blocking/DefaultRetryLatch.html" title="class in org.multiverse.api.blocking"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/multiverse/api/blocking/RetryLatch.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RetryLatch.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.multiverse.api.blocking</FONT>
<BR>
Interface RetryLatch</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../org/multiverse/api/blocking/DefaultRetryLatch.html" title="class in org.multiverse.api.blocking">DefaultRetryLatch</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>RetryLatch</B></DL>
</PRE>

<P>
A blockingAllowed structure that can be used to create blocking transactions. When a transaction blocks, a
 'listener' is added to each read transactional object. This listener is the Latch. Each transactional object
 can have a set of listeners.
 <p/>
 The Latch can safely be created once by a Txn and reused by the same Txn because it works based on
 an listenerEra. So of opens happen with an older listener-era, the open is ignored. So even though the Latch could
 be attached to an older ref that didn't get updated, but is updated eventually even though the latch is notified
 by another ref, there is no problem.
 <p/>
 By resetting it, the listenerEra-counter is incremented, so that call to open or await are ignored.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Peter Veentjer.</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#await(long, java.lang.String)">await</A></B>(long&nbsp;expectedEra,
      <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;transactionFamilyName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Awaits for this Latch to open.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#awaitNanos(long, long, java.lang.String)">awaitNanos</A></B>(long&nbsp;expectedEra,
           long&nbsp;nanosTimeout,
           <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;transactionFamilyName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Awaits for this latch to open with a timeout.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#awaitNanosUninterruptible(long, long)">awaitNanosUninterruptible</A></B>(long&nbsp;expectedEra,
                          long&nbsp;nanosTimeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Awaits for this latch to open with a timeout.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#awaitUninterruptible(long)">awaitUninterruptible</A></B>(long&nbsp;expectedEra)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Awaits for this latch to open.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#getEra()">getEra</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the current era.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#isOpen()">isOpen</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if the Latch is open.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#open(long)">open</A></B>(long&nbsp;expectedEra)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Opens this latch only if the expectedEra is the same.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/multiverse/api/blocking/RetryLatch.html#reset()">reset</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prepares the Latch for pooling.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="isOpen()"><!-- --></A><H3>
isOpen</H3>
<PRE>
boolean <B>isOpen</B>()</PRE>
<DL>
<DD>Checks if the Latch is open.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if the Latch is open, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="open(long)"><!-- --></A><H3>
open</H3>
<PRE>
void <B>open</B>(long&nbsp;expectedEra)</PRE>
<DL>
<DD>Opens this latch only if the expectedEra is the same. If the expectedEra is not the same, the call is ignored.
 If the Latch already is open, this call is also ignored.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>expectedEra</CODE> - the expected era.</DL>
</DD>
</DL>
<HR>

<A NAME="getEra()"><!-- --></A><H3>
getEra</H3>
<PRE>
long <B>getEra</B>()</PRE>
<DL>
<DD>Gets the current era.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the current era.</DL>
</DD>
</DL>
<HR>

<A NAME="awaitUninterruptible(long)"><!-- --></A><H3>
awaitUninterruptible</H3>
<PRE>
void <B>awaitUninterruptible</B>(long&nbsp;expectedEra)</PRE>
<DL>
<DD>Awaits for this latch to open. This call is not responsive to interrupts.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>expectedEra</CODE> - the expected era. If the era is different, the await always succeeds.</DL>
</DD>
</DL>
<HR>

<A NAME="await(long, java.lang.String)"><!-- --></A><H3>
await</H3>
<PRE>
void <B>await</B>(long&nbsp;expectedEra,
           <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;transactionFamilyName)</PRE>
<DL>
<DD>Awaits for this Latch to open. There are 3 possible ways for this methods to complete;
 <ol>
 <li>the era doesn't match the expected era</li>
 <li>the latch is opened while waiting</li>
 <li>the latch is interrupted while waiting. When this happens the RetryInterruptedException
 is thrown and the Thread.interrupt status is restored.</li>
 </ol>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>expectedEra</CODE> - the expected era.<DD><CODE>transactionFamilyName</CODE> - the name of the transaction (only needed for creating
                              a usable message in the RetryInterruptedException).
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/multiverse/api/exceptions/RetryInterruptedException.html" title="class in org.multiverse.api.exceptions">RetryInterruptedException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="awaitNanosUninterruptible(long, long)"><!-- --></A><H3>
awaitNanosUninterruptible</H3>
<PRE>
long <B>awaitNanosUninterruptible</B>(long&nbsp;expectedEra,
                               long&nbsp;nanosTimeout)</PRE>
<DL>
<DD>Awaits for this latch to open with a timeout. This call is not responsive to interrupts.
 <p/>
 When the calling thread is interrupted, the Thread.interrupt status will not be eaten by
 this method and safely be restored.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>expectedEra</CODE> - the expected era.<DD><CODE>nanosTimeout</CODE> - the timeout in nanoseconds
<DT><B>Returns:</B><DD>the remaining timeout.  A negative value indicates that the Latch is not opened in time.</DL>
</DD>
</DL>
<HR>

<A NAME="awaitNanos(long, long, java.lang.String)"><!-- --></A><H3>
awaitNanos</H3>
<PRE>
long <B>awaitNanos</B>(long&nbsp;expectedEra,
                long&nbsp;nanosTimeout,
                <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;transactionFamilyName)</PRE>
<DL>
<DD>Awaits for this latch to open with a timeout. This call is responsive to interrupts.
 <p/>
 When the calling thread is interrupted, the Thread.interrupt status will not be eaten by
 this method and safely be restored.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>expectedEra</CODE> - the expected era<DD><CODE>nanosTimeout</CODE> - the timeout in nanoseconds. Can safely be called with a zero or negative timeout<DD><CODE>transactionFamilyName</CODE> - the name of the transaction (only needed for creating
                              a usable message in the RetryInterruptedException).
<DT><B>Returns:</B><DD>the remaining timeout. A 0 or negative value indicates that the latch is not opened in time.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/multiverse/api/exceptions/RetryInterruptedException.html" title="class in org.multiverse.api.exceptions">RetryInterruptedException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="reset()"><!-- --></A><H3>
reset</H3>
<PRE>
void <B>reset</B>()</PRE>
<DL>
<DD>Prepares the Latch for pooling. All waiting threads will be notified and the era is increased.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RetryLatch.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/multiverse/api/blocking/DefaultRetryLatch.html" title="class in org.multiverse.api.blocking"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/multiverse/api/blocking/RetryLatch.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RetryLatch.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2012. All Rights Reserved.
</BODY>
</HTML>
